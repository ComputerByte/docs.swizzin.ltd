(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{127:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return u}));var r=n(3),a=n(7),i=(n(0),n(158)),o={id:"migrating",title:"Migrating swizzin installations across servers",sidebar_label:"Migrating"},l={unversionedId:"guides/migrating",id:"guides/migrating",isDocsHomePage:!1,title:"Migrating swizzin installations across servers",description:"This guide should be used as a generic reference for when",source:"@site/docs/guides/migrating.md",slug:"/guides/migrating",permalink:"/guides/migrating",editUrl:"https://github.com/liaralabs/docs.swizzin.ltd/edit/master/docs/guides/migrating.md",version:"current",sidebar_label:"Migrating",sidebar:"docs",previous:{title:"Setting up swizzin with advanced options",permalink:"/guides/advanced-setup"},next:{title:"setdisk",permalink:"/scripts/setdisk"}},s=[{value:"Server itself",id:"server-itself",children:[]},{value:"Swizzin source code",id:"swizzin-source-code",children:[]},{value:"Any other applications",id:"any-other-applications",children:[]},{value:"OS &amp; Disks",id:"os--disks",children:[]},{value:"Swizzin",id:"swizzin",children:[{value:"Users",id:"users",children:[]},{value:"Apps",id:"apps",children:[]}]}],c={toc:s};function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"This guide should be used as a generic reference for when "),Object(i.b)("h1",{id:"1-update-everything-on-old-server"},"1. Update everything on old server"),Object(i.b)("h2",{id:"server-itself"},"Server itself"),Object(i.b)("p",null,"Do a full ",Object(i.b)("inlineCode",{parentName:"p"},"apt update && apt upgrade")," run"),Object(i.b)("h2",{id:"swizzin-source-code"},"Swizzin source code"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"sudo box update")," before "),Object(i.b)("h2",{id:"any-other-applications"},"Any other applications"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"sudo box upgrade")," any other application remaining"),Object(i.b)("h1",{id:"2-prepare-new-server"},"2. Prepare new server"),Object(i.b)("h2",{id:"os--disks"},"OS & Disks"),Object(i.b)("h2",{id:"swizzin"},"Swizzin"),Object(i.b)("p",null,"Follow the standard install procedures."),Object(i.b)("h3",{id:"users"},"Users"),Object(i.b)("p",null,"Create all your users with the same usernames ",Object(i.b)("strong",{parentName:"p"},"and passwords"),"."),Object(i.b)("h3",{id:"apps"},"Apps"),Object(i.b)("p",null,"Install the same apps you got on your old system."),Object(i.b)("p",null,"Make sure to shut them down after you're done installing them so that the configs nd everything will not get overwritten after you transfer your stuff."),Object(i.b)("h1",{id:"3-spin-down-apps-on-old-server"},"3. Spin down apps on old server"),Object(i.b)("p",null,"You ",Object(i.b)("strong",{parentName:"p"},"absolutely")," need to stop everything that's happening on the old server. Otherwise you'll be transferring data that might be written into, which is no bueno."),Object(i.b)("p",null,"You might as well reboot your system into rescue, ",Object(i.b)("inlineCode",{parentName:"p"},"mount")," and ",Object(i.b)("inlineCode",{parentName:"p"},"chroot")," your old setup in, and start an SSH server."),Object(i.b)("h1",{id:"4-transfer-data"},"4. Transfer data"),Object(i.b)("p",null,"We highly recommend running this in ",Object(i.b)("inlineCode",{parentName:"p"},"screen")," so that you can disconnect from your SSH in case this takes a while."),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"rsync -ahH --info=progress-2 -e'ssh' user@oldserver:/home/<oldusername>/ /home/<newusername> --usermap=<oldusername>:<newusername> --exclude=.config/deluge/core.conf --exclude=.config/deluge/web.conf --exclude=.rtorrent.rc\n")),Object(i.b)("h1",{id:"5-migrate-all-applications"},"5. Migrate all applications"),Object(i.b)("p",null,"Check whether some of your apps require some configuration that is not covered with the data transfer rsync command above."),Object(i.b)("p",null,"Notable examples are:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"letsencrypt",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"Just reinstall it"))),Object(i.b)("li",{parentName:"ul"},"Flood",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"}))),Object(i.b)("li",{parentName:"ul"},"Plex",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"More in ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://support.plex.tv/articles/201370363-move-an-install-to-another-system/"}),"this guide")," and in ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://forums.plex.tv/t/pms-migration-linux/678445/2"}),"this guide specifically for Linux")))),Object(i.b)("li",{parentName:"ul"},"mango"),Object(i.b)("li",{parentName:"ul"},"ombi",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"More ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/Ombi-app/Ombi/wiki/Backups"}),"here")," or ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://docs.ombi.app/info/backing-up/"}),"here")))),Object(i.b)("li",{parentName:"ul"},"tautulli",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"More ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/Tautulli/Tautulli/wiki/Frequently-Asked-Questions#q-i-need-to-movereinstall-tautulli-can-i-keep-my-history-and-statistics"}),"here")))),Object(i.b)("li",{parentName:"ul"},"thelounge"),Object(i.b)("li",{parentName:"ul"},"znc",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"More ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://wiki.znc.in/FAQ#How_do_I_migrate_ZNC_from_one_machine_to_another.3F"}),"here")))),Object(i.b)("li",{parentName:"ul"},"nextcloud",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"Loosely follow ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://docs.nextcloud.com/server/21/admin_manual/maintenance/migrating.html"}),"this guide")," but make sure to check in with us in the discord because I don't have time to write all the differences right now"))),Object(i.b)("li",{parentName:"ul"},"organizr"),Object(i.b)("li",{parentName:"ul"},"quassel"),Object(i.b)("li",{parentName:"ul"},"rclone"),Object(i.b)("li",{parentName:"ul"},"rutorrent"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("em",{parentName:"li"},"... and probably a couple more ..."))))}u.isMDXComponent=!0},158:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),u=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},b=function(e){var t=u(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),b=u(n),d=r,m=b["".concat(o,".").concat(d)]||b[d]||p[d]||i;return n?a.a.createElement(m,l(l({ref:t},c),{},{components:n})):a.a.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);